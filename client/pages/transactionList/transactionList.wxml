<import src="./orderItem.wxml" />
<view style='display: flex; flex-direction: column; position:relative; width:{{windowWidth}}rpx; '>
  <view style='background-color:rgb(236,236,236); width:100%; height:{{windowHeight}}rpx; z-index: 1;'></view>
  <view class='tab' bindtap='toggleTab'>
    <text style="flex-grow: 1;" class='{{toPayColor}}' data-color='{{toPayColor}}' data-type=''>全部</text>
    <text style="flex-grow: 1;" class='{{payedColor}}' data-color='{{payedColor}}' data-type='1'>待发货</text>
    <text style="flex-grow: 1;" class='{{payedColor}}' data-color='{{payedColor}}' data-type='2'>已发货</text>
    <text style="flex-grow: 1;" class='{{payedColor}}' data-color='{{payedColor}}' data-type='3'>已拒收</text>
    <text style="flex-grow: 1;" class='{{payedColor}}' data-color='{{payedColor}}' data-type='4'>已完成</text>
  </view>


  <view class='container-fg' hidden='{{!order.length}}'>

    <view class='item-container' wx:for="{{order}}" wx:key="index" wx:if='{{!item.toRemove}}'>
      <view class='center regular order-container'>
        <text class='order-num'>订单号：{{item.orderId}}</text>
        <text class='order-state'>{{payStyle[item.orderStatus]}}</text>
      </view>
      <template is="orderItem" data="{{order:item}}"></template>
      <view class='total-money'>共计{{item.itemTotalCount}}件商品 实付总额：
        <text style='color:#ec6515;'>￥{{item.totalAmount}}</text>
      </view>
      <view class="line" style='height:1rpx; z-index: 1;'></view>
      

      <view style="display: flex;background:#fff;">
        <text style="flex-grow: 1;"></text>
        <button class='btn regular' catchtap='removeOrder' data-index='{{index}}'>取消订单</button>
        <button class='btn regular' style="color: rgb(235,97,18);border-color: rgb(235,97,18);background: rgb(255,255,255);" data-trans-id="{{item.transactionId}}" bindtap="goTransDetails"><text>再次购买</text></button>
      </view>
      <!-- </navigator> -->
    </view>

    <view class="container footer-container-no-msg" wx:if='{{order.length==0 && loadCompleted }}'>
      <view class="line" style='height:1rpx; z-index: 1;'></view>
      <image class='logo' style=' z-index: 1; position：absolute; top: 0; left:0;' src="{{homeLogo}}"></image>
      <view class='footer-container-no-item-msg' style='display:flex; flex-direction: column;'>
        <view style='align-self:center;'>您还没有交易记录哦</view>
        <view style='align-self:center;'>只支持2018年7月6日之后的数据查询</view>
      </view>

    </view>

    <view class='footer-container-has-msg' wx:else>
      <view class="line-gray" style='width:{{windowWidth-60}}rpx; '></view>
      <view class="line-gray" style='width:{{windowWidth-60}}rpx;'></view>

      <view class="bottom-gray footer-container-has-msg-content" style='display: flex; flex-direction: column; width: 480rpx;'>
        <view style='align-self: center;'>{{dataMessageToPay}}</view>
      </view>
    </view>
  </view>

</view>