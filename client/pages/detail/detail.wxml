<view class='product-card'>
  <swiper indicator-dots="{{indicatorDots}}" autoplay="{{autoplay}}" interval="{{interval}}" duration="{{duration}}" class='bgc' style="height: 750rpx;">
    <block wx:for="{{product.item_image_address}}" wx:key='{{index}}'>
      <swiper-item style='display:flex; height:100%;'>
        <image bind:tap='preview' data-src="{{item}}" src="{{item}}" class="slide-image" style="height:100%;;margin:0 auto;" />
      </swiper-item>
    </block>
  </swiper>
  <view>
    <view class='padding medium bgc'>
      <view class='product-price'>￥{{product.price}}</view>
      <view class='product-name'>{{product.item_brand}}</view>
    </view>
    <view class='center promotion-container padding regular bgc mgt' catch:tap='showPromotion'>
      <text class='promotion' style="align-self: start;">促销</text>
      <view class='promotion-list'>
        <view class='center' wx:for='{{product.item_location_collection}}' wx:key='index' wx:if='{{index<3}}' style="height: 36rpx;">
          <text class='promotion-type'>{{item.type}}</text>
          <text class='ellipse' style='width:490rpx;'>{{item.content}}</text>
        </view>
      </view>
      <image src='../memberDetail/img/arrow.png' class='order-arrow1'></image>
    </view>
    <view class='center promotion-container padding regular bgc' style='margin-top:15rpx;'>
      <text class='promotion' style="align-self: start;">类别</text>
      <view class='promotion-list'>
        <view class='center' style="height: 36rpx;">
          <text class='ellipse' style='width:490rpx;'>{{product.item_specification}}</text>
          <text class='promotion-type'></text>
        </view>
      </view>
      <view></view>
    </view>
    <view class='center promotion-container padding regular bgc mgt'>
      <text class='promotion' style="align-self: start;">信息</text>
      <view class='promotion-list'>
        <view class='center'>
          <text style='width:490rpx;'>{{product}}</text>
          <text class='promotion-type'></text>
        </view>
      </view>
      <view></view>
    </view>
    <view class='center promotion-container padding regular bgc mgt'>
      <text class='promotion' style="align-self: start;">介绍</text>
      <view class='promotion-list'>
        <view class='center'>
          <text style='width:490rpx;'>{{product.sales_description}}</text>
          <text class='promotion-type'></text>
        </view>
      </view>
      <view></view>
    </view>
  </view>

  <view class='bgc' style="margin-top: 15rpx;">
    <view class='center-center regular' style="height: 76rpx;font-size:28rpx;color: #EE711F;">
      <view class='short-line'></view>
      <text class='dot' style="margin-left: 0;">.</text>相关宝贝
      <text class='dot' style="margin-right: 0;">.</text>
      <view class='short-line'></view>
    </view>
    <swiper indicator-dots="{{true}}" indicator-active-color='#FDB658' autoplay="{{false}}" interval="{{interval}}" display-multiple-items='{{3}}' duration="{{duration}}" class='padding' style="height: 350rpx;">
      <navigator wx:for="{{imgUrls}}" wx:key='{{index}}' url='{{"/pages/detail/detail?item_id="+item.item_id}}'>
        <swiper-item class='column' style='justify-content:space-around; margin:0 6rpx;'>
          <view class='center-center' style="width: 100%;flex-grow:1;height:230rpx;">
            <image mode='widthFix' src="{{item.img}}" class="slide-image" style="border-radius: 8rpx;width:218rpx;max-height:100%;" />
          </view>
          <text class='regular relative-name'>{{item.title}}</text>
          <view class='center' style="width: 100%;align-items: center;">
            <text class='relative-money dollar'>{{item.money}}</text>
            <text class='promotion-type'>{{item.type}}</text>
          </view>
        </swiper-item>
      </navigator>
    </swiper>
  </view>
  <text class='sold-out btn-container center-center' wx:if='{{!product.item_status}}' style='top:{{top}}rpx;transform:translate(0, -184rpx);'>该商品已下架</text>
  <view wx:if='{{!promotion}}' class='bgc center btns regular padding mgt btn-container' style='top:{{top}}rpx;opacity:{{product.item_status?1:0.3}};'>
    <view class='center-center' style='flex-grow:1;' wx:if='{{!isSelecting}}'>
      <image src='{{icon}}' style='width:41rpx;height:41rpx;'></image>
      <cover-view class='medium cart-num center-center' wx:if='{{badge}}'>{{badge}}</cover-view>
    </view>
    <button bindtap='addToTrolley' disabled='{{!product.item_status}}'>加入进货单</button>
    <button bind:tap='buy' disabled='{{!product.item_status}}' class='{{isSelecting?"buy-selecting":"buy-btn"}}'>{{isSelecting?buyTxt:'立即购买'}}</button>
  </view>
  <view wx:if='{{isSelecting}}' class='select-goods bgc ' style='top:{{top-750}}rpx;'>
    <view class='center padding' style='justify-content:space-between;'>
      <image src='../../images/home-sel.png' class='goods-pic'></image>
      <view>
        <view class='product-name' style="width: 444rpx;">{{product.item_brand}}</view>
        <text class='dollar product-price'>{{currentMoney}}</text>
      </view>
      <image src='../../images/close.png' class='close-popup' catch:tap='closePopup'></image>
    </view>
    <view class='line'></view>
    <view class='padding'>
      <scroll-view scroll-y style="height: 340rpx;">

        <view wx:for='{{specificationList}}' wx:key='{{index}}' style='padding:18rpx 0;'>
          <view class='center regular specification '>
            <text>规格</text>
            <text style="font-size: 28rpx;">{{item.specification}}</text>
          </view>
          <view class='center regular specification '>
            <text>购买数量</text>
            <view class='center' style='align-items:center'>
              <text class='plus-minus center-center' style='opacity:{{item.num?1:0.5}};' catch:tap='minus' data-index='{{index}}'>-</text>
              <text class='plus-minus center-center' style="font-size: 32rpx;">{{item.num}}</text>
              <text class='plus-minus center-center' catch:tap='plus' data-index='{{index}}'>+</text>
            </view>
          </view>
        </view>
      </scroll-view>

    </view>
    <view class='padding subtotal ' style='padding-top:0;'>小计 :1件 ¥58.00</view>
  </view>
  <view wx:if='{{promotion}}' class='select-goods bgc padding center' style='top:{{top-750}}rpx; justify-content:space-between;'>
    <view class='promotion-list regular'>
      <view class='center' wx:for='{{product.item_location_collection}}' wx:key='index' style="height: 80rpx;">
        <text class='promotion-type'>{{item.type}}</text>
        <text class='promotion-txt' >{{item.content}}</text>
      </view>
    </view>
    <image src='../../images/close.png' class='close-popup' catch:tap='closePopupPromotion' style='transform:translate(-36rpx,0);'></image>

  </view>
</view>