<import src="./list.wxml" />
<view class="promote-msg regular" style='padding-left: 24rpx; background-color: #ffffff; color:#333333; font-size:26rpx;'>
  {{promoteMsg}}
</view>
<view class='line'></view>
<view wx:if='{{items.itemList.length}}' class='center regular promotion-tab bgc' style='justify-content:space-around;'>

  <view class='{{tabs[0]?"selected":"unselected"}}' catch:tap='toggleKind' data-index='{{0}}'>{{composeProducts.categoryName}}
  </view>
  <view class='{{tabs[1]?"selected":"unselected"}}' catch:tap='toggleKind' data-index='{{1}}'>{{items.categoryName}}
  </view>
</view>
<scroll-view scroll-y style='height:{{108*2*4-100}}rpx;'>
  <view hidden='{{!tabs[0]}}'>
    <view wx:for='{{items.itemList}}' wx:key='*this' style='opacity:{{(item.checked||enableChecked[0])?1:0.5}};'>
      <template is="msgItem" data="{{item,index}}" />

    </view>
  </view>
  <view hidden='{{!tabs[1]}}'>
    <view wx:for='{{composeProducts.itemList}}' wx:key='*this' style='opacity:{{(item.checked||enableChecked[1])?1:0.5}};'>
      <template is="msgItem" data="{{item,index}}" />

    </view>
  </view>
</scroll-view>
<view class='bgc center btns regular padding-vertical-10  mgt fixed-position' style='z-index:10;'>
  <view class='center-center' style='justify-content:left; margin-right: 20rpx;'>
    <!-- <image src='{{imgTrolly}}' class='promotion-icon' style='width:54rpx;height:54rpx;' bindtap='gotoTrolley'></image> -->


    <view class='center-center' style='flex-grow:1; margin-left:30rpx;' bindtap='gotoTrolley'>
      <image src='{{imgTrolly}}' style='width:54rpx;height:54rpx;'></image>
      <view class='medium cart-num center-center' wx:if='{{badge}}'>
        {{badge}}
      </view>
    </view>

    <view class='column' style="align-items: left;margin-left: 20rpx;">
      <view class='center' style="align-items: center;">
        <view class='foot-txt1' style='font-size:24rpx;color:#383838; '>套装价</view>
        <view class='foot-txt2' style='font-size:40rpx;color:#EE711F; margin-right:0;width:200rpx;'>¥{{totalPrice}}</view>
      </view>
      <view class='foot-txt3'>已省28.8元</view>
    </view>
  </view>
  <button bindtap='addToTrolley' class="without-back-image" style='margin-left: 20rpx;'>加入进货单</button>
</view>
<view class='promote-container' style='top:{{top}}rpx;' wx:if="{{!showPromoteDetail}}">
  <view style='display: flex; overflow:hidden;max-width:90%;'>
    <view class='' style='display: flex; align-items: center;margin-left: 24rpx; font-size:24rpx; color:#333333;white-space:nowrap;'>搭配商品</view>
    <view wx:for='{{selectedProductList}}' wx:key='*this'>
      <view style='position: relative;'>
        <image style='width: 80rpx; height: 80rpx; border:1px solid rgb(236,236,236); margin: 10rpx;' src='{{item.itemImageAddress1}}'></image>
        <image style='width: 32rpx; height: 32rpx; position: absolute; left:60rpx; top:20rpx;' src='../../images/zeng.png' wx:if="{{item.isGift}}"></image>
      </view>

    </view>
  </view>
  <image class='promote-arrow' src='../../images/down-arrow.png' bindtap='togglePromoteDetail'></image>
</view>

<view class='promote-container-detail' style='padding-left:24rpx; font-size:24rpx; top:{{top}}rpx;' wx:else>
  <view style='display: flex;   justify-content: space-between; align-items:center; padding-top: 20rpx;'>
    <view style='display: flex; align-items: center; font-size:24rpx; color:#333333;'>搭配商品</view>
    <image class='promote-arrow' src='../../images/up-arrow.png' bindtap='togglePromoteDetail'></image>
  </view>

  <scroll-view class="scroll-view_H center" scroll-x style="width: 100%" style='white-space: nowrap;padding:0;box-sizing:border-box;'>
    <view style='display: flex; flex-direction: row;  '>
      <!-- <view wx:for='{{selectedProductList}}' wx:key='*this'> -->
      <view wx:for='{{selectedProductList}}' wx:key='*this' style='width: 150rpx; height:auto; padding:10rpx;border:1px solid rgb(236,236,236); margin: 10rpx;position: relative;'>
        <image style='width: 32rpx; height: 32rpx; position: absolute; left:130rpx; top:10rpx;' src='../../images/zeng.png' wx:if="{{item.isGift}}"></image>
        <image style='width: 120rpx; height: 120rpx;  margin: 10rpx;' src='{{item.itemImageAddress1}}'></image>
        <view style='background-color:grey; border-radius:10rpx;  width: auto; display:inline-block !important; display:inline; color: white;transform:translate(-150rpx,0);'>¥{{item.price}}</view>
        <view style='display: flex; justify-content: space-between;'>
          <view style='white-space: nowrap;overflow: hidden;text-overflow: ellipsis;'>{{item.itemName}}</view>
          <view style='white-space:nowrap'>x{{item.minQuantity}}</view>
        </view>
      </view>
      <!-- </view> -->
    </view>
  </scroll-view>

</view>