<view wx:if='{{hasOrders}}'>
  <scroll-view scroll-y style="height: {{height}}rpx;" bindscrolltoupper='upper' bindscrolltolower="lower" scroll-into-view="{{toView}}" scroll-top="{{scrollTop}}">
    <view wx:if='{{!item.isRemoved}}' class='center padding trolley-container regular bgc' wx:for='{{trolley}}' wx:key='{{index}}' bind:tap='turnPage' data-itemid='{{item.itemId}}' style="padding-left: 0;">
      <view class='column' style='margin-top:auto;position:relative;'>
        <radio catch:tap='preventBubble' class="radio" data-index='{{index}}' value="{{index}}" checked="{{item.checked}}" wx:if='{{item.putShelvesFlg}}' color='{{item.checked?"#EE711F":"#D1D1D2"}}'>
        </radio>
        <text wx:else class='radio trolley-invalid regular'>失效</text>
      </view>
      <view style="position: relative;">
        <image src='{{item.itemImageAddress1?item.itemImageAddress1:defImg}}' class='goods-img ' mode='aspectFit'>
        </image>
        <view wx:if='{{!item.putShelvesFlg}}' class='trolley-soldout regular center-center'>已下架</view>
      </view>
      <view class='column trolley-right '>
        <text class='trolley-name {{item.putShelvesFlg?"":"trolley-opacity"}}'>{{item.itemName}}</text>
        <view class='center trolley-middle'>
          <text class='trolley-spec {{item.putShelvesFlg?"":"trolley-opacity"}}'>规格：{{item.itemSpecification}}</text>
          <image src='./img/del.png' class='del {{item.putShelvesFlg?"":"trolley-invalid-del"}}' catch:tap='del' data-itemid='{{item.itemId}}' data-index='{{index}}'></image>
        </view>
        <view class='center trolley-bottom'>
          <text wx:if='{{item.putShelvesFlg}}' class='dollar medium trolley-price'>{{item.price}}</text>
          <text wx:else class='regular trolley-not-buy'>宝贝已下架不能购买</text>
          <view wx:if='{{item.putShelvesFlg}}' class='center' style='align-items:center'>
            <text  class='plus-minus center-center' style='opacity:{{item.quantity===1?0.5:1}};' catch:tap='plusMinus' data-index='{{index}}' data-type='minus' data-enabled='{{item.putShelvesFlg}}'>-</text>
            <text class='plus-minus center-center' style="font-size: 26rpx;">{{item.quantity}}</text>
            <text class='plus-minus center-center' catch:tap='plusMinus' data-index='{{index}}' data-enabled='{{item.putShelvesFlg}}'>+</text>
          </view>
        </view>
      </view>
    </view>
  </scroll-view>

  <view class='trolley-total bgc regular '>
    <view class='center trolley-calc padding' hidden='{{!disableBuy}}'>
      <block wx:if='{{checkbox}}'>
        <text>还差¥{{remaining}}可生成订单</text>
        <view class='center' style="align-items: center;">
          <text catch:tap='addOn'>去凑单</text>
          <image src='./img/arrow.png' class='trolley-arrow'></image>
        </view>
      </block>
      <text wx:else>订单最低起定价:¥500</text>
    </view>
    <view class='center padding trolley-confirm'>
      <radio style='transform:scale(.6);' value="{{item.name}}" checked='{{checkAll}}' catch:tap='selectAll' color='{{checkAll?"#EE711F":"#D1D1D2"}}'>
        <view style="font-size: 42rpx; padding-left:0rpx;">全选</view>
      </radio>
      <text>合计:<text class='dollar trolley-num medium'>{{currentMoney}}</text></text>
      <button class='trolley-btn center-center {{disableBuy?"":"enable"}}' catch:tap='confirmOrder' hover-class='btn-hover'>确认订单({{checkbox}})</button>
    </view>
  </view>
</view>
<view wx:else class='regular trolley-empty center-center'>
  <view class='column'>
    <image src='/images/ic_cart_def@2x.png'></image>
    <text>您的购物车还没有商品喔</text>
    <button catch:tap='gotoSort'>去商城逛逛</button>
  </view>
</view>